"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[562],{7032:function(e,t,n){n.d(t,{Z:function(){return r}});var s=n(3615),a=n(184);function r(e){var t=e.id,n=e.name,r=e.selected,c=e.options,u=void 0===c?[]:c,d=e.classes,m=e.defaultValue,h=void 0===m?"":m,f=e.value,v=void 0===f?"":f,p=e.defaultOption,b=void 0===p?"Select value":p,g=e.addDefaultOption,S=void 0===g||g,x=e.required,w=void 0===x||x,_=e.onChange,j=void 0===_?null:_;return(0,a.jsxs)("select",{id:t||n,name:n,onChange:j&&j,autoComplete:"on",value:v,required:w,className:(0,s.AK)("ctx-block ctx-rounded-md  !ctx-border-gray-300 ctx-shadow-sm focus:!ctx-border-gray-900  sm:ctx-text-sm ",d),children:[S&&(0,a.jsx)("option",{value:h,children:b}),u.length?"string"==typeof u[0]?l(u,r):o(u,r):i(u,r)]})}function o(e,t){return Object.values(e)[0].hasOwnProperty("optionGroup")?Object.values(e).map((function(e,t){return e.hasOwnProperty("optionGroup")?(0,a.jsx)("optgroup",{label:e.optionGroup,children:Object.keys(e.options).map((function(t,n){var s=e.options[t];return(0,a.jsxs)("option",{value:t,children:[" ",s," "]},n)}))},t):null})):i(e,t)}function i(e,t){return Object.keys(e).map((function(t,n){return(0,a.jsxs)("option",{value:e[t]._id,children:[" ",e[t].name," "]},n)}))}function l(e,t){return e.map((function(e,t){return(0,a.jsxs)("option",{value:e,children:[" ",e.slice(0,1).toUpperCase()+e.slice(1,e.length)," "]},t)}))}},8562:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var s=n(9439),a=n(2791),r=n(7892),o=n.n(r),i=n(2581),l=n(3027),c=n.n(l),u=n(3666),d=n.n(u),m=n(1550),h=n(184);function f(e){var t=e.slot,n=e.interval,s=(e.lang,e.selectedSlotColor),r=e.isSelected,o=e.onSelect,i=e.disabled,l=e.disableColor,c=void 0===l?"#b9b9b9":l,u=0===t.get("m"),d=function(e){e.preventDefault(),o(t)};return(0,h.jsx)(a.Fragment,{children:i?(0,h.jsxs)("div",{className:"sp-timeslot cursor-default py-1 rounded-sm my-1.5  ".concat(i?"selected":""," ").concat(u&&"with-tick"),style:i?{background:c,color:"black"}:{},children:[(0,h.jsxs)("span",{className:"sp-label",style:r?{background:c,color:"black"}:{},children:["".concat(t.format("hh:mm")).concat((0,m.kw)(t)," - "),"".concat(t.add(n,"m").format("hh:mm")).concat((0,m.kw)(t))]}),(0,h.jsx)("button",{disabled:!0,className:"radioBtn"})]}):(0,h.jsxs)("div",{onClick:function(e){return d(e)},className:"sp-timeslot py-1 rounded-sm my-1.5  ".concat(r?"selected":""," ").concat(u&&"with-tick"),style:r?{background:s,color:"white"}:{},children:[(0,h.jsxs)("span",{className:"sp-label",style:r?{background:s,color:"white"}:{},children:["".concat(t.format("hh:mm")).concat((0,m.kw)(t)," - "),"".concat(t.add(n,"m").format("hh:mm")).concat((0,m.kw)(t))]}),(0,h.jsx)("button",{onClick:function(e){return d(e)},className:"radioBtn"})]})})}o().extend(c()),o().extend(d());var v=n(9434),p=n(8295);function b(e){var t=e.interval,n=e.unAvailableSlots,r=e.from,o=e.to,i=e.lang,l=e.selectedSlotColor,c=e.onSelectTime,u=e.classes,d=void 0===u?"p-5":u,p=e.timeSlots,b=void 0===p?[]:p,g=e.defaultSelectedTime,S=void 0===g?[]:g,x=(0,v.v9)((function(e){return e.common})).themeColor;i=i||"en";var w=[];n&&(w=n),l=l||x;var _=r||"08:00",j=o||"20:00";if(Number.parseInt(_.split(":")[0])<0||Number.parseInt(_.split(":")[0])>23||Number.parseInt(j.split(":")[0])<0||Number.parseInt(j.split(":")[0])>23||Number.parseInt(_.split(":")[1])<0||Number.parseInt(_.split(":")[1])>59||Number.parseInt(j.split(":")[1])<0||Number.parseInt(j.split(":")[1])>59)throw new Error("SlotPicker Error: hours value is between 00-23, and minutes is between 00-59");var N=(0,a.useState)(S),C=(0,s.Z)(N,2),D=C[0],y=C[1];(0,a.useEffect)((function(){y(S)}),[S]);var k=function(e){y([e.format("hh:mm")+""+(0,m.kw)(e)]),c(e.format("hh:mm")+""+(0,m.kw)(e))};return(0,h.jsx)("div",{className:d,children:(0,h.jsx)("div",{className:"time-selector-w d-block ".concat("ar"==i&&"sp-rtl"),children:(0,h.jsx)("div",{className:"os-times-w",children:(0,h.jsx)("div",{className:"timeslots",children:b.map((function(e,n){return(0,h.jsx)(f,{interval:t,selectedSlotColor:l,slot:e,isSelected:D.includes(e.format("hh:mm")+""+(0,m.kw)(e)),onSelect:k,disabled:w.includes(e.format("hh:mm")+""+(0,m.kw)(e))},n)}))})})})})}o().extend(c()),o().extend(d());var g=n(2357),S=n(8210),x=n(22),w=n(7032),_=n(3615);function j(){var e=(0,v.v9)((function(e){return e.schedules})).schedules,t=(0,a.useState)(null),n=(0,s.Z)(t,2),r=n[0],l=n[1],c=(0,a.useState)((new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate()),u=(0,s.Z)(c,2),d=u[0],m=u[1],f=(0,a.useState)([]),j=(0,s.Z)(f,2),N=j[0],C=j[1],D=(0,a.useState)([]),y=(0,s.Z)(D,2),k=y[0],L=y[1],O=(0,a.useState)([]),Z=(0,s.Z)(O,2),Y=Z[0],I=Z[1],E=(0,a.useState)([]),M=(0,s.Z)(E,2),F=M[0],G=M[1],P=(0,a.useState)([]),H=(0,s.Z)(P,2),T=H[0],q=H[1],A=(0,a.useState)({timeSlots:[],perSessionLength:60}),B=(0,s.Z)(A,2),U=B[0],R=B[1],J=(0,a.useState)([]),K=(0,s.Z)(J,2),V=K[0],W=K[1],z=(0,a.useState)([]),Q=(0,s.Z)(z,2),X=Q[0],$=Q[1],ee=(0,a.useState)([]),te=(0,s.Z)(ee,2),ne=te[0],se=te[1],ae=a.useRef(),re=(0,v.I0)(),oe=(0,v.v9)((function(e){return e.users})).users,ie=(0,v.v9)((function(e){return e.userSchedules})),le=ie.registerUserSchedule,ce=ie.currentDoctorSchedules,ue=ie.isNewSchedule,de=ie.defaultSchedule,me=(0,v.v9)((function(e){return e.branches})).branches;(0,a.useEffect)((function(){if(ue){l(null),q([]),q([]),G([]),$([]);var e=document.querySelectorAll(".react-calendar__tile");Object.values(e).map((function(e){e.classList.remove("bg-themeColor"),e.classList.remove("text-white")}))}}),[ue]),(0,a.useEffect)((function(){re((0,p.Rd)()),re((0,g.uh)()),re((0,x.oe)({endpoint:"/api/branches",config:{}}));var e=(0,_.G)(["registerUserSchedule"]);Object.keys(e).length?re((0,S.PY)(e.registerUserSchedule)):(0,_.fW)("registerUserSchedule",de)}),[]),(0,a.useEffect)((function(){var e=structuredClone(me);e.unshift({_id:"online",name:"online"}),se(e)}),[me]),(0,a.useEffect)((function(){var e=oe.filter((function(e,t){return"DOCTOR"===e.userRole}));C(e);var t=[];e.map((function(e){t.includes(e.speciality.toLowerCase())||t.push(e.speciality.toLowerCase())})),L(t),I(e)}),[oe]),(0,a.useEffect)((function(){for(var e=100,t="00:00",n=U.perSessionLength,s=[];o()("2001-01-01 ".concat(t),"YYYY-MM-DD HH:mm").isBefore(o()("2001-01-01 ".concat("23:00"),"YYYY-MM-DD HH:mm"))&&e>0;){var a=o()().set("h",Number.parseInt(t.split(":")[0])).set("m",Number.parseInt(t.split(":")[1])).add(n,"m");U.timeSlots.length&&U.timeSlots.includes(a.format("HH:mm"))&&s.push(a),U.timeSlots.length<1&&s.length<=7&&s.push(a),t=a.format("HH:mm"),e--}le[1].session_time&&G([le[1].session_time]),W(s)}),[U]),(0,a.useEffect)((function(){var e=document.getElementsByClassName("react-calendar__month-view__days__day");Object.values(e).map((function(e){e.hasAttribute("disabled")?(e.classList.add("bg-[#b9b9b9]"),e.classList.remove("hover:bg-themeColor"),e.classList.remove("hover:text-white")):(e.classList.remove("bg-[#b9b9b9]"),e.classList.remove("text-white"),e.classList.add("hover:bg-themeColor"),e.classList.add("hover:text-white"))}))}),[X]),(0,a.useEffect)((function(){if(le[1].session_date&&l(new Date(le[1].session_date)),le[1].doctor_id){var t=e.filter((function(e){return e.user===le[1].doctor_id}));if(t.length&&t[0].offDay.length){var n=[];n=X.length?(0,_.gl)(X,d):(0,_.dN)(t[0].offDay,d),$(n),R(t[0])}}}),[le,e]),(0,a.useEffect)((function(){if(null!==r){var e=parseInt(r.getDate()),t=document.querySelectorAll(".react-calendar__tile");Object.values(t).map((function(t){parseInt(t.firstChild.innerText)===e?(t.classList.add("bg-themeColor"),t.classList.add("text-white")):(t.classList.remove("bg-themeColor"),t.classList.remove("text-white"))}))}}),[r]);var he=function(t){var n=[];if("session_name"===t.target.name){var s=N.filter((function(e){return e.speciality.toLowerCase()===t.target.value.toLowerCase()}));s.length&&I(s)}if("doctor_id"===t.target.name){var a=e.filter((function(e){return e.user===t.target.value}));a.length&&a[0].offDay.length&&((0,_.Gj)("per_session_length",a[0].perSessionLength),R(a[0])),"0"!==t.target.value&&(a.map((function(e){me.map((function(t){t._id===e.branch&&n.push(t)}))})),n.unshift({_id:"online",name:"online"}),se(n))}if("branch_id"===t.target.name){var r=null;if(e.map((function(e){t.target.value===e.branch&&(r=e.sessionFee)})),r){var o=(0,_.Gj)("session_fee",r,1);re((0,S.PY)(o))}}var i=(0,_.Gj)(t.target.name,t.target.value,1);re((0,S.PY)(i))};return(0,a.useEffect)((function(){var e=JSON.parse(JSON.stringify(X)),t={},n=(new Date).getMonth();if(ce.length){for(var s=0;s<ce.length;s++){var a=ce[s],r=new Date(a.session_date);r.getMonth()===n&&(t[r.getDate()]?t[r.getDate()].push(a.session_time):t[r.getDate()]=[a.session_time])}Object.keys(t).map((function(n){t[n].length===V.length&&e.push(parseInt(n))})),$(e)}}),[ce]),(0,h.jsxs)("div",{className:"flex flex-wrap justify-start  py-4 mb-12 sm:mb-8 ",children:[(0,h.jsxs)("div",{className:"w-44",children:[(0,h.jsx)("label",{htmlFor:"session_name",children:"Session"}),(0,h.jsx)(w.Z,{value:le[1].session_name?le[1].session_name:"0",onChange:function(e){return he(e)},defaultOption:"Select Session",classes:"border w-44 p-2",options:k,id:"session_name",name:"session_name",required:!0})]}),(0,h.jsxs)("div",{className:"ml-2 w-44",children:[(0,h.jsx)("label",{htmlFor:"doctor_id",children:"Doctor"}),(0,h.jsx)(w.Z,{onChange:function(e){return he(e)},defaultOption:"Select Doctor",classes:"border w-44 p-2",options:Y,id:"doctor_id",name:"doctor_id",required:!0,value:le[1].doctor_id?le[1].doctor_id:"0"})]}),(0,h.jsxs)("div",{className:" ml-2 w-44",children:[(0,h.jsx)("label",{htmlFor:"branch_id",children:"Branch Name"}),(0,h.jsx)(w.Z,{onChange:function(e){return he(e)},defaultOption:"Select Branch",classes:"border w-44 p-2",options:ne,id:"branch_id",name:"branch_id",required:!0,value:le[1].branch_id?le[1].branch_id:"0"})]}),(0,h.jsxs)("div",{className:"w-72",children:[(0,h.jsx)("label",{htmlFor:"session_date",children:"Select Date"}),(0,h.jsx)(i.ZP,{tileClassName:"p-2.5 hover:text-white hover:bg-themeColor ",tileDisabled:function(e){e.activeStartDate;var t=e.date;e.view;return!!X.includes(t.getDate())},className:"mx-2 border border-themeColor session_date",onChange:function(e){return function(e){l(e);var t=(0,_.Gj)("session_date",e);if(re((0,S.PY)(t)),ce.length){for(var n=[],s=0;s<ce.length;s++){var a=ce[s],r=new Date(a.session_date);r.getMonth()===e.getMonth()&&r.getDate()===e.getDate()&&n.push(a.session_time)}q(n)}}(e)},value:r,showNeighboringMonth:!1,inputRef:ae,calendarType:"US",onActiveStartDateChange:function(e){e.action;var t=e.activeStartDate;e.value,e.view;m(t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate())}})]}),(0,h.jsxs)("div",{className:"w-44",children:[(0,h.jsx)("label",{htmlFor:"session_time",children:"Session Time"}),(0,h.jsx)(b,{interval:U.perSessionLength,from:"07:00",to:"23:00",unAvailableSlots:T,lang:"en",defaultSelectedTime:F,onSelectTime:function(e){return function(e){var t=(0,_.Gj)("session_time",e);re((0,S.PY)(t))}(e)},classes:"hover:cursor-pointer",timeSlots:V})]})]})}}}]);
//# sourceMappingURL=562.21c84f81.chunk.js.map